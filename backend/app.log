2025-12-06 12:59:42 | INFO     | app.core.logging:setup_logging:38 - Logging configured: level=INFO, file=app.log
2025-12-06 12:59:51 | INFO     | main:lifespan:41 - ----------------------------------------
2025-12-06 12:59:51 | INFO     | main:lifespan:42 - Starting B2B Textile Procurement API
2025-12-06 12:59:51 | INFO     | main:lifespan:43 - Version: 1.0.0
2025-12-06 12:59:51 | INFO     | main:lifespan:44 - Debug mode: False
2025-12-06 12:59:51 | INFO     | main:lifespan:45 - ----------------------------------------
2025-12-06 12:59:51 | SUCCESS  | main:lifespan:49 - LangGraph initialized
2025-12-06 12:59:57 | INFO     | main:log_requests:100 - GET /
2025-12-06 12:59:57 | INFO     | main:log_requests:102 - GET / - Status: 200
2025-12-06 12:59:57 | INFO     | main:log_requests:100 - GET /favicon.ico
2025-12-06 12:59:57 | INFO     | main:log_requests:102 - GET /favicon.ico - Status: 404
2025-12-06 13:00:34 | INFO     | main:log_requests:100 - OPTIONS /api/v1/conversations
2025-12-06 13:00:34 | INFO     | main:log_requests:102 - OPTIONS /api/v1/conversations - Status: 200
2025-12-06 13:00:34 | INFO     | main:log_requests:100 - GET /api/v1/conversations
2025-12-06 13:00:34 | INFO     | app.services.graph_manager:_ensure_initialized:42 - Initializing checkpoint database: B2B-textile-assistant.db
2025-12-06 13:00:35 | SUCCESS  | app.services.graph_manager:_ensure_initialized:64 - LangGraph initialized successfully
2025-12-06 13:00:35 | INFO     | app.services.conversation_service:list_conversations:870 - Found 2 conversations
2025-12-06 13:00:35 | INFO     | main:log_requests:102 - GET /api/v1/conversations - Status: 200
2025-12-06 13:00:41 | INFO     | main:log_requests:100 - OPTIONS /api/v1/conversations/stream
2025-12-06 13:00:41 | INFO     | main:log_requests:102 - OPTIONS /api/v1/conversations/stream - Status: 200
2025-12-06 13:00:41 | INFO     | main:log_requests:100 - POST /api/v1/conversations/stream
2025-12-06 13:00:41 | INFO     | app.api.v1.endpoints.conversation_endpoints:start_conversation_stream:938 - Starting streaming conversation for user: demo_user
2025-12-06 13:00:41 | INFO     | app.api.v1.endpoints.conversation_endpoints:start_conversation_stream:951 - Initial state for streaming start: {'thread_id': 'demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0', 'user_input': 'I need a quote for 5,000 meters of organic cotton canvas', 'status': 'starting', 'channel': 'web'}
2025-12-06 13:00:41 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:83 - [SSE] Sending connected event, size: 168
2025-12-06 13:00:41 | INFO     | main:log_requests:102 - POST /api/v1/conversations/stream - Status: 200
2025-12-06 13:00:41 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:87 - [SSE] Starting stream for thread: demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0
2025-12-06 13:00:41 | INFO     | app.services.graph_manager:execute_workflow:89 - Starting workflow execution for thread: demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0
2025-12-06 13:00:41 | INFO     | nodes.user_input_receiver_node:receive_user_input:26 - Received user input on channel web: I need a quote for 5,000 meters of organic cotton canvas
2025-12-06 13:00:41 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:141 - [SSE] Processing node: receive_user_input
2025-12-06 13:00:41 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:162 - [SSE] Sending node_progress event, size: 157
2025-12-06 13:00:41 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:203 - [SSE] Sending message event, size: 199
2025-12-06 13:00:41 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:203 - [SSE] Sending message event, size: 187
2025-12-06 13:00:44 | INFO     | nodes.intent_classifier_node:classify_intent:111 - Classified intent: get_quote with confidence 0.95
2025-12-06 13:00:44 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:141 - [SSE] Processing node: classify_intent
2025-12-06 13:00:44 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:162 - [SSE] Sending node_progress event, size: 147
2025-12-06 13:00:44 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:203 - [SSE] Sending message event, size: 190
2025-12-06 13:00:44 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:211 - [SSE] Intent classified: get_quote
2025-12-06 13:00:50 | INFO     | nodes.parameter_extractor_node:extract_parameters:73 - Clarification questions generated: ['What color do you need?', 'What specific quality specifications are you looking for (e.g., GSM, weave)?', 'Do you have any specific certifications in mind, like GOTS or OEKO-TEX?', 'What is your desired delivery destination and timeline?', 'Do you have a target price range or budget?']
2025-12-06 13:00:50 | WARNING  | nodes.parameter_extractor_node:extract_parameters:74 - Missing critical information, clarification needed.
2025-12-06 13:00:50 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:141 - [SSE] Processing node: extract_parameters
2025-12-06 13:00:50 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:162 - [SSE] Sending node_progress event, size: 129
2025-12-06 13:00:50 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:203 - [SSE] Sending message event, size: 639
2025-12-06 13:00:50 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:222 - [SSE] Parameters extracted
2025-12-06 13:01:15 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:141 - [SSE] Processing node: search_suppliers_direct_sql
2025-12-06 13:01:15 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:162 - [SSE] Sending node_progress event, size: 138
2025-12-06 13:01:15 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:203 - [SSE] Sending message event, size: 203
2025-12-06 13:01:15 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:239 - [SSE] Found 6 suppliers
2025-12-06 13:01:46 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:141 - [SSE] Processing node: generate_quote
2025-12-06 13:01:46 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:162 - [SSE] Sending node_progress event, size: 147
2025-12-06 13:01:46 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:203 - [SSE] Sending message event, size: 668
2025-12-06 13:01:46 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:260 - [SSE] Quote generated: QT-20251206-80A5C471
2025-12-06 13:01:46 | SUCCESS  | app.services.graph_manager:execute_workflow:96 - Workflow completed for thread: demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0
2025-12-06 13:01:46 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:295 - [SSE] Workflow generator exhausted, fetching final state
2025-12-06 13:01:47 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:301 - [SSE] Final state - status: quote_generated, paused: False
2025-12-06 13:01:47 | SUCCESS  | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:318 - [SSE] Stream completed for thread: demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0
2025-12-06 13:01:48 | INFO     | main:log_requests:100 - OPTIONS /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/comprehensive
2025-12-06 13:01:48 | INFO     | main:log_requests:102 - OPTIONS /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/comprehensive - Status: 200
2025-12-06 13:01:48 | INFO     | main:log_requests:100 - OPTIONS /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/status
2025-12-06 13:01:48 | INFO     | main:log_requests:100 - OPTIONS /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/messages
2025-12-06 13:01:48 | INFO     | main:log_requests:100 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/comprehensive
2025-12-06 13:01:48 | INFO     | main:log_requests:102 - OPTIONS /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/status - Status: 200
2025-12-06 13:01:48 | INFO     | main:log_requests:102 - OPTIONS /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/messages - Status: 200
2025-12-06 13:01:48 | INFO     | main:log_requests:100 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/status
2025-12-06 13:01:48 | INFO     | main:log_requests:100 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/messages
2025-12-06 13:01:48 | INFO     | main:log_requests:102 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/messages - Status: 200
2025-12-06 13:01:48 | INFO     | main:log_requests:102 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/comprehensive - Status: 200
2025-12-06 13:01:48 | INFO     | main:log_requests:102 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/status - Status: 200
2025-12-06 13:02:03 | INFO     | main:log_requests:100 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/status
2025-12-06 13:02:03 | INFO     | main:log_requests:102 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/status - Status: 200
2025-12-06 13:02:07 | INFO     | main:log_requests:100 - OPTIONS /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/select-supplier
2025-12-06 13:02:07 | INFO     | main:log_requests:102 - OPTIONS /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/select-supplier - Status: 200
2025-12-06 13:02:07 | INFO     | main:log_requests:100 - POST /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/select-supplier
2025-12-06 13:02:07 | INFO     | app.services.graph_manager:update_state:158 - Updated state for thread: demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0
2025-12-06 13:02:07 | INFO     | main:log_requests:102 - POST /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/select-supplier - Status: 200
2025-12-06 13:02:07 | INFO     | main:log_requests:100 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/comprehensive
2025-12-06 13:02:07 | INFO     | main:log_requests:102 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/comprehensive - Status: 200
2025-12-06 13:02:08 | INFO     | main:log_requests:100 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/status
2025-12-06 13:02:08 | INFO     | main:log_requests:102 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/status - Status: 200
2025-12-06 13:02:13 | INFO     | main:log_requests:100 - OPTIONS /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/stream/continue
2025-12-06 13:02:13 | INFO     | main:log_requests:102 - OPTIONS /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/stream/continue - Status: 200
2025-12-06 13:02:13 | INFO     | main:log_requests:100 - POST /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/stream/continue
2025-12-06 13:02:13 | INFO     | app.api.v1.endpoints.conversation_endpoints:continue_conversation_stream:1092 - Continuing streaming conversation: demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0
2025-12-06 13:02:13 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:83 - [SSE] Sending connected event, size: 171
2025-12-06 13:02:13 | INFO     | main:log_requests:102 - POST /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/stream/continue - Status: 200
2025-12-06 13:02:13 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:87 - [SSE] Starting stream for thread: demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0
2025-12-06 13:02:13 | INFO     | app.services.graph_manager:continue_workflow:246 - Continuing workflow with updates for thread: demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0
2025-12-06 13:02:13 | INFO     | nodes.user_input_receiver_node:receive_user_input:26 - Received user input on channel web: Can you improve the lead time from 60 to 45 days?
2025-12-06 13:02:13 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:141 - [SSE] Processing node: receive_user_input
2025-12-06 13:02:13 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:162 - [SSE] Sending node_progress event, size: 157
2025-12-06 13:02:13 | INFO     | main:log_requests:100 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/status
2025-12-06 13:02:13 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:203 - [SSE] Sending message event, size: 192
2025-12-06 13:02:13 | INFO     | main:log_requests:102 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/status - Status: 200
2025-12-06 13:02:14 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:203 - [SSE] Sending message event, size: 187
2025-12-06 13:02:16 | INFO     | nodes.intent_classifier_node:classify_intent:111 - Classified intent: negotiate with confidence 0.9
2025-12-06 13:02:16 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:141 - [SSE] Processing node: classify_intent
2025-12-06 13:02:16 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:162 - [SSE] Sending node_progress event, size: 147
2025-12-06 13:02:16 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:203 - [SSE] Sending message event, size: 190
2025-12-06 13:02:16 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:211 - [SSE] Intent classified: negotiate
2025-12-06 13:02:16 | INFO     | nodes.negotiation_starter_node:start_negotiation:26 - Starting negotiation initialization...
2025-12-06 13:02:16 | INFO     | nodes.negotiation_starter_node:start_negotiation:32 - No existing negotiation messages found.
2025-12-06 13:02:18 | INFO     | nodes.negotiation_starter_node:start_negotiation:52 - Extracted negotiation objective: Reduce lead time.
2025-12-06 13:02:20 | INFO     | nodes.negotiation_starter_node:start_negotiation:91 - Extracted negotiation topic: lead time
2025-12-06 13:02:20 | INFO     | nodes.negotiation_starter_node:start_negotiation:92 - Extracted conversation tone: collaborative
2025-12-06 13:02:20 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:141 - [SSE] Processing node: start_negotiation
2025-12-06 13:02:20 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:162 - [SSE] Sending node_progress event, size: 128
2025-12-06 13:02:20 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:203 - [SSE] Sending message event, size: 295
2025-12-06 13:02:21 | INFO     | nodes.negotiation_message_drafter_node:analyze_negotiation_history:60 - Using user-selected supplier for profile.
2025-12-06 13:02:21 | INFO     | nodes.negotiation_message_drafter_node:analyze_negotiation_history:80 - Active Supplier Profile: {'name': 'EcoCanvas Mills Turkey', 'location': 'Istanbul, Turkey', 'country': 'Unknown', 'email': 'igntayyab@gmail.com', 'reliability_score': 5.0, 'cultural_region': 'middle_eastern', 'past_negotiations': 1, 'communication_style': 'standard'}
2025-12-06 13:02:27 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:141 - [SSE] Processing node: draft_negotiation_message
2025-12-06 13:02:27 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:162 - [SSE] Sending node_progress event, size: 163
2025-12-06 13:02:27 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:203 - [SSE] Sending message event, size: 666
2025-12-06 13:02:27 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:271 - [SSE] Negotiation message drafted
2025-12-06 13:02:27 | INFO     | nodes.message_validator_node:validate_and_enhance_message:473 - Starting message validation and enhancement process.
2025-12-06 13:02:27 | INFO     | nodes.message_validator_node:validate_and_enhance_message:494 - Drafted message extracted for validation (1131 characters).
2025-12-06 13:02:27 | INFO     | nodes.message_validator_node:extract_validation_context:299 - Using user-selected supplier for profile.
2025-12-06 13:02:27 | INFO     | nodes.message_validator_node:extract_validation_context:317 - Extracted validation context successfully. in message_validator_node.py
2025-12-06 13:02:27 | INFO     | nodes.message_validator_node:validate_and_enhance_message:502 - Invoking validation model with drafted message and context.
2025-12-06 13:02:45 | INFO     | nodes.message_validator_node:validate_and_enhance_message:525 - 
 VALIDATION RESULTS: Overall Quality Score: 0.54, Recommended Action: HUMAN_REVIEW_REQUIRED, Critical Issues: 2, Clarity: 0.50, Completeness: 0.40, Professionalism: 0.90
2025-12-06 13:02:45 | INFO     | nodes.message_validator_node:validate_and_enhance_message:528 - Ambiguities detected: 2 and the details are [AmbiguityIssue(issue_type='commercial_terms', location='accelerated payment terms upon delivery', severity='critical', suggestion="Specify the exact payment terms (e.g., 'Net 15 days from delivery', '100% payment upon delivery', '50% advance, 50% upon delivery').", auto_fixable=False), AmbiguityIssue(issue_type='commercial_terms', location='streamline the logistics coordination process on our end.', severity='high', suggestion="Clarify what 'streamline' entails and explicitly state preferred Incoterms (e.g., 'FOB Istanbul', 'CIF your warehouse') and responsibilities.", auto_fixable=False)]
2025-12-06 13:02:45 | INFO     | nodes.message_validator_node:validate_and_enhance_message:530 - Missing information detected: 3 and the details are [MissingInformation(missing_field='payment_terms_details', importance='critical', context="The offer of 'accelerated payment terms' lacks specific details, which is crucial for the supplier to evaluate the counter-offer and for clear financial planning.", available_in_state=False, suggested_value=None), MissingInformation(missing_field='incoterms', importance='critical', context="Discussing 'streamlined logistics coordination' without specifying Incoterms leaves ambiguity about responsibilities, costs, and risk transfer for shipping.", available_in_state=False, suggested_value=None), MissingInformation(missing_field='lead_time_trigger', importance='medium', context="While 'lead time' generally implies from order confirmation, explicitly stating what triggers the 45-day lead time (e.g., 'from order confirmation' or 'from advance payment receipt') removes potential ambiguity.", available_in_state=False, suggested_value=None)]
2025-12-06 13:02:45 | INFO     | nodes.message_validator_node:validate_and_enhance_message:573 - Auto-enhancing message to resolve issues...
2025-12-06 13:02:45 | INFO     | nodes.message_validator_node:format_issues_for_enhancement:423 - Formatting issues for message enhancement.
2025-12-06 13:02:58 | INFO     | nodes.message_validator_node:validate_and_enhance_message:597 - 
 ENHANCEMENT COMPLETE:
2025-12-06 13:02:58 | INFO     | nodes.message_validator_node:validate_and_enhance_message:598 -    Enhanced Message Length: 1724 characters
2025-12-06 13:02:58 | INFO     | nodes.message_validator_node:validate_and_enhance_message:599 -    Removed Ambiguities: 3
2025-12-06 13:02:58 | INFO     | nodes.message_validator_node:validate_and_enhance_message:600 -    Added Proactive Clarifications: 3
2025-12-06 13:02:58 | INFO     | nodes.message_validator_node:validate_and_enhance_message:601 -    Improvement Summary: Addressed critical ambiguities regarding payment terms and Incoterms by providing specific details. Clarified the lead time trigger and enhanced the message for cultural appropriateness with a Middle Eastern supplier, maintaining a professional and relationship-building tone. Used bold formatting for key information.
2025-12-06 13:02:58 | INFO     | nodes.message_validator_node:validate_and_enhance_message:606 - Added clarifications during enhancement: 3 and the details are ['Specific payment terms (Net 15 days from delivery) were added.', 'Specific Incoterms (FOB Istanbul) were added with an inline definition and explanation of "streamline".', 'The lead time trigger (from order confirmation and receipt of any agreed advance payment) was specified.']
2025-12-06 13:02:58 | INFO     | nodes.message_validator_node:validate_and_enhance_message:608 -    Quality Improvement: +0.45
2025-12-06 13:02:58 | INFO     | nodes.message_validator_node:validate_and_enhance_message:609 -    Final Quality Score: 0.90
2025-12-06 13:02:58 | INFO     | nodes.message_validator_node:validate_and_enhance_message:610 -    Changes Made: 7
2025-12-06 13:02:58 | INFO     | nodes.message_validator_node:validate_and_enhance_message:611 -    Ready to Send: Yes
2025-12-06 13:02:58 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:141 - [SSE] Processing node: validate_and_enhance_message
2025-12-06 13:02:58 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:162 - [SSE] Sending node_progress event, size: 173
2025-12-06 13:02:58 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:203 - [SSE] Sending message event, size: 691
2025-12-06 13:02:58 | INFO     | nodes.negotiation_message_sender:send_negotiation_message:103 - Sending negotiation message to igntayyab@gmail.com
2025-12-06 13:03:09 | INFO     | main:log_requests:100 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/status
2025-12-06 13:03:09 | INFO     | main:log_requests:102 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/status - Status: 200
2025-12-06 13:03:10 | INFO     | nodes.negotiation_message_sender:send_negotiation_message:119 - Extracted supplier_id from active_supplier_id: CANVAS_001
2025-12-06 13:03:10 | INFO     | app.services.supplier_request_service:create_supplier_request:48 - Creating supplier request for thread: demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0, supplier: CANVAS_001
2025-12-06 13:03:10 | SUCCESS  | app.services.supplier_request_service:create_supplier_request:84 - ‚úÖ Supplier request created: REQ-20251206-5048B50E
2025-12-06 13:03:10 | INFO     | app.services.supplier_request_service:_send_request_notification:312 - üìß Sending notification for request: REQ-20251206-5048B50E
2025-12-06 13:03:10 | SUCCESS  | app.services.supplier_request_service:_send_request_notification:341 - ‚úÖ Notifications sent to 2 users
2025-12-06 13:03:10 | SUCCESS  | nodes.negotiation_message_sender:send_negotiation_message:147 - ‚úÖ Supplier request created successfully
2025-12-06 13:03:10 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:141 - [SSE] Processing node: send_negotiation_message
2025-12-06 13:03:10 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:162 - [SSE] Sending node_progress event, size: 143
2025-12-06 13:03:11 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:203 - [SSE] Sending message event, size: 299
2025-12-06 13:03:11 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:141 - [SSE] Processing node: __interrupt__
2025-12-06 13:03:11 | WARNING  | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:145 - [SSE] Node data is not dict: <class 'tuple'>
2025-12-06 13:03:11 | WARNING  | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:152 - [SSE] Cannot convert node_data to dict, skipping
2025-12-06 13:03:11 | SUCCESS  | app.services.graph_manager:continue_workflow:258 - Workflow continued successfully for thread: demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0
2025-12-06 13:03:11 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:295 - [SSE] Workflow generator exhausted, fetching final state
2025-12-06 13:03:11 | INFO     | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:301 - [SSE] Final state - status: email_sent, paused: True
2025-12-06 13:03:11 | SUCCESS  | app.api.v1.endpoints.conversation_endpoints:stream_workflow_events:318 - [SSE] Stream completed for thread: demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0
2025-12-06 13:03:12 | INFO     | main:log_requests:100 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/comprehensive
2025-12-06 13:03:12 | INFO     | main:log_requests:100 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/messages
2025-12-06 13:03:12 | INFO     | main:log_requests:102 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/messages - Status: 200
2025-12-06 13:03:12 | INFO     | main:log_requests:102 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/comprehensive - Status: 200
2025-12-06 13:03:14 | INFO     | main:log_requests:100 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/status
2025-12-06 13:03:14 | INFO     | main:log_requests:102 - GET /api/v1/conversations/demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0/status - Status: 200
2025-12-06 13:03:38 | INFO     | main:log_requests:100 - OPTIONS /api/v1/supplier/requests/REQ-20251206-5048B50E
2025-12-06 13:03:38 | INFO     | main:log_requests:102 - OPTIONS /api/v1/supplier/requests/REQ-20251206-5048B50E - Status: 200
2025-12-06 13:03:38 | INFO     | main:log_requests:100 - GET /api/v1/supplier/requests/REQ-20251206-5048B50E
2025-12-06 13:03:38 | INFO     | main:log_requests:102 - GET /api/v1/supplier/requests/REQ-20251206-5048B50E - Status: 200
2025-12-06 13:03:43 | INFO     | main:log_requests:100 - OPTIONS /api/v1/supplier/requests/REQ-20251206-5048B50E/respond
2025-12-06 13:03:43 | INFO     | main:log_requests:102 - OPTIONS /api/v1/supplier/requests/REQ-20251206-5048B50E/respond - Status: 200
2025-12-06 13:03:43 | INFO     | main:log_requests:100 - POST /api/v1/supplier/requests/REQ-20251206-5048B50E/respond
2025-12-06 13:03:43 | INFO     | app.api.v1.endpoints.supplier_portal:submit_response:223 - üìù Supplier response received for request: REQ-20251206-5048B50E
2025-12-06 13:03:43 | INFO     | app.api.v1.endpoints.supplier_portal:submit_response:224 - Response Type: accept
2025-12-06 13:03:43 | INFO     | app.api.v1.endpoints.supplier_portal:submit_response:225 - Response Text: I accept
2025-12-06 13:03:43 | INFO     | app.api.v1.endpoints.supplier_portal:submit_response:226 - Response Data: None
2025-12-06 13:03:43 | INFO     | app.services.supplier_request_service:submit_supplier_response:107 - Processing supplier response for request: REQ-20251206-5048B50E
2025-12-06 13:03:43 | SUCCESS  | app.services.supplier_request_service:submit_supplier_response:141 - Supplier response saved: REQ-20251206-5048B50E
2025-12-06 13:03:43 | INFO     | app.services.supplier_request_service:submit_supplier_response:148 - submit_supplier_response Attempting to update state for thread: demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0
2025-12-06 13:03:43 | INFO     | app.services.supplier_request_service:submit_supplier_response:152 - submit_supplier_response Setting current_request_id to: REQ-20251206-5048B50E
2025-12-06 13:03:43 | INFO     | app.services.graph_manager:update_state:158 - Updated state for thread: demo_user_7d16a1ed-0b43-4930-823e-4971fe46bec0
2025-12-06 13:03:43 | SUCCESS  | app.services.supplier_request_service:submit_supplier_response:158 - submit_supplier_response Updated conversation state with current_request_id: REQ-20251206-5048B50E
2025-12-06 13:03:43 | INFO     | app.services.supplier_request_service:submit_supplier_response:163 - submit_supplier_response VERIFICATION - current_request_id in state now: REQ-20251206-5048B50E
2025-12-06 13:03:43 | SUCCESS  | app.api.v1.endpoints.supplier_portal:submit_response:257 - ‚úÖ Response stored (not auto-resumed): REQ-20251206-5048B50E
2025-12-06 13:03:43 | INFO     | main:log_requests:102 - POST /api/v1/supplier/requests/REQ-20251206-5048B50E/respond - Status: 200